# 瑞控RKF405飞控固件仓库  

## 介绍  
这是扬州瑞控汽车电子有限公司RKF405对BetaFlight以及INAV两种固件所用的软件仓库；  
**根据BetaFlight和INAV的开源协议**，将需要替换的驱动代码以及端口配置开源上传；  
![照片](./images/正面照.jpg)   

## 配置
| 功能 | 信息介绍 | 
|-------|-------|
| BEC | 9V3A/5V3A |
| 主控 | STM32F405VG |
| 陀螺仪 | ICM42688(外接时钟) |
| 气压计 | DPS368 |
| OSD | ATE7456E |
| FLASH | 16MB |

## 目前固件支持状态  
| 软件| 低噪声适配 | 版本 |更新日期 |
|-------|-------|-------|-------|
|**BetaFlight**| 是| 4.5.2 |25/4/25 |
| **INAV** | 是 |8.0.1|25/4/28|

## 接线图
![接线图](./images/接线说明.jpg)  

## 外接时钟的优势
**噪声抑制与精度提升**  
使用外部时钟源（如高精度晶振）替代ICM42688内部时钟，可将时钟抖动噪声降低至±50 ppm。  
外部时钟的相位噪声和频率稳定性显著优于内部RC振荡器，从而减少陀螺仪采样时的时序误差，  
提升数据一致性和信噪比。  
**温度稳定性增强**  
外部时钟的温漂系数通常低于内部时钟，可减少因温度变化引起的陀螺仪零偏漂移（TCO）。  
根据手册，ICM42688内部时钟的温漂为±0.005 dps/K，外部时钟可进一步优化至±0.002 dps/K量级，  
提升高温或低温环境下的可靠性。  

## DPS368气压计
DPS368比DPS310的工艺更新，且噪声更低。  
因为两者的地址是相同的，在地面站DPS368中会显示为DPS310，这不会影响实际性能参数。  
在封装上，两者与BMP280也同样兼容，  
因为封装一样，用户可以尝试替换对比，替换时请注意元器件方向。  
器件连接为IIC，与连接磁力计的IIC焊盘为同一组线。  

##固件编译及修改方法
在搭建好环境后，下载仓库提供的drivers文件中的.c文件，并替换到对应固件的代码路径中。  
**BetaFlight**固件需将配置文件放在/src/config/configs里面  
**INAV**固件需将配置的文件放在/src/main/target里面  

## 未来更新计划
**1、** 更多的下载地址  
**2、** 地面站调试视频教程  
**3、** 固件编译视频教程  
